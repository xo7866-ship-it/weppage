(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{3697:(e,t,r)=>{Promise.resolve().then(r.bind(r,5709))},6046:(e,t,r)=>{"use strict";var s=r(6658);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},5709:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(5155),a=r(2115),o=r(6046),n=r(4915),l=r(8849);async function i(e){let t=e.customerName||"비회원",r={id:"ORD-".concat(new Date().toISOString().slice(2,10).replace(/-/g,""),"-").concat(Math.floor(1e3*Math.random()).toString().padStart(3,"0")),customer:t,phone:e.phone,address:e.address,privacyAgreed:!0,date:new Date().toLocaleDateString("ko-KR"),items:e.items,total:e.total,status:"주문접수"};return l.Q.add(r),{success:!0,orderId:r.id}}var c=function(e,t){return(c=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},d=function(){return(d=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function u(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]])}return r}var p,m="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js",h=(p=null,function(e){return void 0===e&&(e=m),p||(p=new Promise(function(t,r){var s=document.createElement("script");s.src=e,s.onload=function(){var e;if(null===(e=null==window?void 0:window.daum)||void 0===e?void 0:e.Postcode)return t(window.daum.Postcode);r(Error("Script is loaded successfully, but cannot find Postcode module. Check your scriptURL property."))},s.onerror=function(e){return r(e)},s.id="daum_postcode_script",document.body.appendChild(s)}))}),f=a.createElement("p",null,"현재 Daum 우편번호 서비스를 이용할 수 없습니다. 잠시 후 다시 시도해주세요."),y={width:"100%",height:400},x={scriptUrl:m,errorMessage:f,autoClose:!0};!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mounted=!1,t.wrap=(0,a.createRef)(),t.state={hasError:!1,completed:!1},t.initiate=function(e){if(t.wrap.current){var r=t.props;r.scriptUrl,r.className,r.style;var s=r.defaultQuery,a=r.autoClose;r.errorMessage;var o=r.onComplete,n=r.onClose,l=r.onResize,i=r.onSearch,c=u(r,["scriptUrl","className","style","defaultQuery","autoClose","errorMessage","onComplete","onClose","onResize","onSearch"]);new e(d(d({},c),{oncomplete:function(e){o&&o(e),t.setState({completed:!0})},onsearch:i,onresize:l,onclose:n,width:"100%",height:"100%"})).embed(t.wrap.current,{q:s,autoClose:a})}},t.onError=function(e){console.error(e),t.setState({hasError:!0})},t}(function(e,t){function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)})(t,e),t.prototype.componentDidMount=function(){var e=this.initiate,t=this.onError,r=this.props.scriptUrl;r&&(this.mounted||(h(r).then(e).catch(t),this.mounted=!0))},t.prototype.render=function(){var e=this.props,t=e.className,r=e.style,s=e.errorMessage,o=e.autoClose,n=this.state,l=n.hasError,i=n.completed;return!0===o&&!0===i?null:a.createElement("div",{ref:this.wrap,className:t,style:d(d({},y),r)},l&&s)},t.defaultProps=x}(a.Component);var j=r(2273),g=r.n(j);function v(){var e;let{items:t,cartCount:r,clearCart:l}=(0,n._)(),c=(0,o.useRouter)(),[p,f]=(0,a.useState)(!1),y=(void 0===e&&(e=m),(0,a.useEffect)(function(){h(e)},[e]),(0,a.useCallback)(function(t){var r=d({},t),s=r.defaultQuery,a=r.left,o=r.top,n=r.popupKey,l=r.popupTitle,i=r.autoClose,c=r.onComplete,p=r.onResize,m=r.onClose,f=r.onSearch,y=r.onError,x=u(r,["defaultQuery","left","top","popupKey","popupTitle","autoClose","onComplete","onResize","onClose","onSearch","onError"]);return h(e).then(function(e){new e(d(d({},x),{oncomplete:c,onsearch:f,onresize:p,onclose:m})).open({q:s,left:a,top:o,popupTitle:l,popupKey:n,autoClose:i})}).catch(y)},[e])),x=e=>{var t;let r=e.address,s="";"R"===e.addressType&&(""!==e.bname&&(s+=e.bname),""!==e.buildingName&&(s+=""!==s?", ".concat(e.buildingName):e.buildingName),r+=""!==s?" (".concat(s,")"):""),document.querySelector('input[name="zipcode"]').value=e.zonecode,document.querySelector('input[name="address1"]').value=r,document.querySelector('input[name="city"]').value=e.sido+" "+e.sigungu,null===(t=document.querySelector('input[name="address2"]'))||void 0===t||t.focus()},j=t.reduce((e,t)=>e+t.price*t.quantity,0),v=j>=5e4?0:3e3,b=j+v;return 0===r?(0,s.jsxs)("div",{className:"container ".concat(g().container),style:{textAlign:"center"},children:[(0,s.jsx)("h1",{children:"주문/결제"}),(0,s.jsx)("p",{children:"장바구니가 비어있습니다."})]}):(0,s.jsxs)("div",{className:"container ".concat(g().container),children:[(0,s.jsx)("h1",{className:g().title,children:"주문/결제"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f(!0);let r=new FormData(e.currentTarget),s="".concat(r.get("firstName")," ").concat(r.get("lastName")).trim(),a=r.get("phone"),o="".concat(r.get("address1")," ").concat(r.get("address2")||"",", ").concat(r.get("city")," (").concat(r.get("zipcode"),")").trim();setTimeout(async()=>{try{let e=await i({items:t.map(e=>({title:e.title,quantity:e.quantity})),total:b,customerName:s||"비회원",phone:a,address:o});e.success&&(f(!1),l&&l(),alert("주문이 완료되었습니다! (주문번호: ".concat(e.orderId,")")),c.push("/"))}catch(e){console.error("Order failed",e),f(!1),alert("주문 처리에 실패했습니다.")}},1e3)},className:g().grid,children:[(0,s.jsxs)("div",{className:g().formSection,children:[(0,s.jsx)("h2",{className:g().sectionTitle,children:"배송 정보"}),(0,s.jsxs)("div",{className:g().row,children:[(0,s.jsxs)("div",{className:g().formGroup,style:{flex:1},children:[(0,s.jsx)("label",{className:g().label,children:"이름"}),(0,s.jsx)("input",{type:"text",name:"firstName",required:!0,className:g().input})]}),(0,s.jsxs)("div",{className:g().formGroup,style:{flex:1},children:[(0,s.jsx)("label",{className:g().label,children:"성"}),(0,s.jsx)("input",{type:"text",name:"lastName",required:!0,className:g().input})]})]}),(0,s.jsxs)("div",{className:g().row,children:[(0,s.jsxs)("div",{className:g().formGroup,style:{flex:1},children:[(0,s.jsx)("label",{className:g().label,children:"우편번호"}),(0,s.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,s.jsx)("input",{type:"text",name:"zipcode",required:!0,className:g().input,readOnly:!0}),(0,s.jsx)("button",{type:"button",onClick:()=>{y({onComplete:x})},style:{padding:"0 1rem",backgroundColor:"#4a5568",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem",whiteSpace:"nowrap"},children:"우편번호 찾기"})]})]}),(0,s.jsxs)("div",{className:g().formGroup,style:{flex:1},children:[(0,s.jsx)("label",{className:g().label,children:"시/도 (자동입력)"}),(0,s.jsx)("input",{type:"text",name:"city",className:g().input,readOnly:!0,tabIndex:-1,style:{backgroundColor:"#f7fafc"}})]})]}),(0,s.jsxs)("div",{className:g().formGroup,children:[(0,s.jsx)("label",{className:g().label,children:"기본 주소"}),(0,s.jsx)("input",{type:"text",name:"address1",required:!0,className:g().input,readOnly:!0,placeholder:"주소 검색을 이용해주세요",style:{backgroundColor:"#f7fafc"}})]}),(0,s.jsxs)("div",{className:g().formGroup,children:[(0,s.jsx)("label",{className:g().label,children:"상세 주소"}),(0,s.jsx)("input",{type:"text",name:"address2",className:g().input,placeholder:"동, 호수, 상세 위치 등"})]}),(0,s.jsxs)("div",{className:g().row,children:[(0,s.jsxs)("div",{className:g().formGroup,style:{flex:1},children:[(0,s.jsx)("label",{className:g().label,children:"연락처"}),(0,s.jsx)("input",{type:"tel",name:"phone",required:!0,className:g().input})]}),(0,s.jsx)("div",{className:g().formGroup,style:{flex:1}})]}),(0,s.jsx)("h2",{className:g().sectionTitle,style:{marginTop:"2rem"},children:"결제 정보"}),(0,s.jsxs)("div",{className:g().formGroup,children:[(0,s.jsx)("label",{className:g().label,children:"카드 번호 (테스트용)"}),(0,s.jsx)("input",{type:"text",placeholder:"0000 0000 0000 0000",className:g().input})]}),(0,s.jsxs)("div",{className:g().row,children:[(0,s.jsxs)("div",{className:g().formGroup,style:{flex:1},children:[(0,s.jsx)("label",{className:g().label,children:"유효기간"}),(0,s.jsx)("input",{type:"text",placeholder:"MM/YY",className:g().input})]}),(0,s.jsxs)("div",{className:g().formGroup,style:{flex:1},children:[(0,s.jsx)("label",{className:g().label,children:"CVC"}),(0,s.jsx)("input",{type:"text",placeholder:"123",className:g().input})]})]}),(0,s.jsx)("div",{className:g().formGroup,style:{marginTop:"2rem",padding:"1rem",backgroundColor:"#f7fafc",borderRadius:"8px"},children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem"},children:[(0,s.jsx)("input",{type:"checkbox",id:"privacy",name:"privacy",required:!0,style:{marginTop:"4px"}}),(0,s.jsxs)("label",{htmlFor:"privacy",style:{fontSize:"0.9rem",lineHeight:"1.5",color:"#4a5568"},children:[(0,s.jsx)("strong",{children:"[필수] 개인정보 수집 및 이용 동의"}),(0,s.jsx)("br",{}),"주문 처리 및 배송을 위해 이름, 연락처, 주소를 수집 및 이용합니다. 수집된 정보는 배송 완료 후 5년 간 보관 후 파기됩니다."]})]})})]}),(0,s.jsxs)("div",{className:g().summarySection,children:[(0,s.jsxs)("div",{className:g().orderSummary,children:[(0,s.jsx)("h3",{className:g().sectionTitle,style:{fontSize:"1.2rem",marginBottom:"1rem"},children:"주문 내역"}),t.map(e=>(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",fontSize:"0.9rem"},children:[(0,s.jsxs)("span",{children:[e.title," x ",e.quantity]}),(0,s.jsxs)("span",{children:[(e.price*e.quantity).toLocaleString(),"원"]})]},e.id)),(0,s.jsxs)("div",{className:g().summaryRow,style:{marginTop:"1rem",borderTop:"1px solid #ddd",paddingTop:"1rem"},children:[(0,s.jsx)("span",{children:"소계"}),(0,s.jsxs)("span",{children:[j.toLocaleString(),"원"]})]}),(0,s.jsxs)("div",{className:g().summaryRow,children:[(0,s.jsx)("span",{children:"배송비"}),(0,s.jsxs)("span",{children:[v.toLocaleString(),"원"]})]}),(0,s.jsxs)("div",{className:g().totalRow,children:[(0,s.jsx)("span",{children:"총 결제금액"}),(0,s.jsxs)("span",{children:[b.toLocaleString(),"원"]})]})]}),(0,s.jsx)("button",{type:"submit",className:g().submitBtn,disabled:p,children:p?"처리 중...":"".concat(b.toLocaleString(),"원 결제하기")})]})]})]})}},4915:(e,t,r)=>{"use strict";r.d(t,{_:()=>l,e:()=>n});var s=r(5155),a=r(2115);let o=(0,a.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,a.useState)([]),[l,i]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{n(JSON.parse(e))}catch(e){console.error("Failed to parse cart",e)}i(!0)},[]),(0,a.useEffect)(()=>{l&&localStorage.setItem("cart",JSON.stringify(r))},[r,l]);let c=r.reduce((e,t)=>e+t.quantity,0);return(0,s.jsx)(o.Provider,{value:{items:r,addToCart:e=>{n(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeFromCart:e=>{n(t=>t.filter(t=>t.id!==e))},cartCount:c,clearCart:()=>{n([])}},children:t})}function l(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},8849:(e,t,r)=>{"use strict";r.d(t,{Q:()=>a});let s=[],a={getAll:()=>s,add:e=>(s=[e,...s],e),updateStatus:(e,t)=>(s=s.map(r=>r.id===e?{...r,status:t}:r)).find(t=>t.id===e),delete:e=>{s=s.filter(t=>t.id!==e)}}},2273:e=>{e.exports={container:"page_container__ghkWP",title:"page_title__c_7Td",grid:"page_grid__bSiy7",formSection:"page_formSection__zZC9P",sectionTitle:"page_sectionTitle__k7geI",formGroup:"page_formGroup__Lv0hl",label:"page_label__RNmIS",input:"page_input__Nvr30",row:"page_row__8r_58",summarySection:"page_summarySection__zIzxB",orderSummary:"page_orderSummary__ooVjF",summaryRow:"page_summaryRow__7_sUZ",totalRow:"page_totalRow__3QZVE",submitBtn:"page_submitBtn__wD4QF"}}},e=>{var t=t=>e(e.s=t);e.O(0,[206,441,517,358],()=>t(3697)),_N_E=e.O()}]);